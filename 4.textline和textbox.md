# SGL Textline å’Œ Textbox æ§ä»¶åº”ç”¨æŒ‡å—

## 1. ç®€ä»‹

åœ¨ **SGL å›¾å½¢åº“** ä¸­ï¼Œæ–‡æœ¬æ˜¾ç¤ºæ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚ä¸ºæ»¡è¶³ä¸åŒåœºæ™¯çš„æ–‡æœ¬å±•ç¤ºéœ€æ±‚ï¼ŒSGL æä¾›äº†ä¸¤ç§ä¸»è¦çš„æ–‡æœ¬æ§ä»¶ï¼š

- **`Textline`ï¼ˆæ–‡æœ¬è¡Œï¼‰æ§ä»¶**ï¼šè½»é‡çº§å¤šè¡Œæ–‡æœ¬æ˜¾ç¤ºï¼Œæ”¯æŒè‡ªåŠ¨æ¢è¡Œã€‚
- **`Textbox`ï¼ˆæ–‡æœ¬æ¡†ï¼‰æ§ä»¶**ï¼šåŠŸèƒ½æ›´ä¸°å¯Œçš„å¤šè¡Œæ–‡æœ¬æ§ä»¶ï¼Œæ”¯æŒæ»šåŠ¨æŸ¥çœ‹é•¿æ–‡æœ¬ã€‚

ä¸¤è€…å‡ç»§æ‰¿è‡ª SGL åŸºç¡€å¯¹è±¡ä½“ç³»ï¼Œå¯æ— ç¼é›†æˆå¸ƒå±€ç®¡ç†ã€æ ·å¼è®¾ç½®ã€äº‹ä»¶å“åº”ç­‰èƒ½åŠ›ã€‚

---

## 2. Textline æ§ä»¶è¯¦è§£

### 2.1 æ¦‚å¿µ

`Textline` æ˜¯ä¸€ä¸ª**è½»é‡çº§å¤šè¡Œæ–‡æœ¬æ˜¾ç¤ºæ§ä»¶**ï¼Œé€‚ç”¨äºæè¿°æ€§æ–‡å­—ã€è¯´æ˜æ ‡ç­¾ç­‰åœºæ™¯ã€‚  
æ”¯æŒï¼š
- è‡ªåŠ¨æ¢è¡Œ
- èƒŒæ™¯è‰²ã€é€æ˜åº¦ã€åœ†è§’
- è¡Œé—´è·ä¸è¾¹ç¼˜è¾¹è·æ§åˆ¶

> <span style="background:#d3f8b6"><font color="#c00000">âš ï¸ **æ³¨æ„**ï¼š`Textline ä¸æ”¯æŒæ»šåŠ¨ï¼Œsgl_obj_set_size(textline, w, h)ä¸­é«˜åº¦å°†ä¸èƒ½ä½¿ç”¨ï¼Œtestlineä¼šæ ¹æ®è®¾ç½®çš„wè‡ªå·±è°ƒæ•´é«˜åº¦ç›´åˆ°æ–‡æœ¬æ˜¾ç¤ºå®Œã€‚</font></span>

### 2.2 åˆ›å»ºæ–¹å¼

```c
sgl_obj_t* sgl_textline_create(sgl_obj_t* parent);
```
- **`parent`**ï¼šçˆ¶å¯¹è±¡æŒ‡é’ˆï¼ˆå¦‚ `Page` æˆ– `Rect`ï¼‰ï¼Œè‹¥ä¸ºé¡¶å±‚å¯ä¼ å…¥é¡µé¢å¯¹è±¡

### 2.3 åŸºç¡€å±æ€§è®¾ç½®ï¼ˆå®Œæ•´æ¥å£ï¼‰

æ‰€æœ‰è®¾ç½®å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡ä¸º `sgl_obj_t* obj`ï¼Œå³é€šè¿‡ `sgl_textline_create()` è¿”å›çš„å¯¹è±¡æŒ‡é’ˆã€‚

| åŠŸèƒ½ | å‡½æ•°åŸå‹ | å‚æ•°è¯´æ˜ |
|------|--------|--------|
| è®¾ç½®æ–‡æœ¬å†…å®¹ | `void sgl_textline_set_text(sgl_obj_t *obj, const char *text)` | `text`ï¼šè¦æ˜¾ç¤ºçš„ C å­—ç¬¦ä¸²ï¼ˆæ”¯æŒ `\n` æ¢è¡Œï¼‰ |
| è®¾ç½®å­—ä½“ | `void sgl_textline_set_text_font(sgl_obj_t *obj, const sgl_font_t *font)` | `font`ï¼šæŒ‡å‘å­—ä½“ç»“æ„ä½“çš„æŒ‡é’ˆï¼ˆ**å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™æ–­è¨€å¤±è´¥**ï¼‰ |
| è®¾ç½®æ–‡æœ¬é¢œè‰² | `void sgl_textline_set_text_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šæ–‡æœ¬é¢œè‰²ï¼ˆå¦‚ `SGL_COLOR_BLACK`ï¼‰ |
| è®¾ç½®èƒŒæ™¯é¢œè‰² | `void sgl_textline_set_bg_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šèƒŒæ™¯è‰²ï¼›è°ƒç”¨åè‡ªåŠ¨å¯ç”¨èƒŒæ™¯ç»˜åˆ¶ï¼ˆ`bg_flag = true`ï¼‰ |
| è®¾ç½®é€æ˜åº¦ | `void sgl_textline_set_alpha(sgl_obj_t *obj, uint8_t alpha)` | `alpha`ï¼šé€æ˜åº¦å€¼ï¼ˆ0=å®Œå…¨é€æ˜ï¼Œ255=ä¸é€æ˜ï¼‰ |
| è®¾ç½®åœ†è§’ | `void sgl_textline_set_radius(sgl_obj_t *obj, uint8_t radius)` | `radius`ï¼šåœ†è§’åŠå¾„ï¼ˆåƒç´ ï¼‰ï¼Œå†…éƒ¨ä¼šè°ƒç”¨ `sgl_obj_fix_radius()` ä¿®æ­£ |
| è®¾ç½®è¾¹ç¼˜è¾¹è· | `void sgl_textline_set_edge_margin(sgl_obj_t *obj, uint8_t margin)` | `margin`ï¼šæ–‡æœ¬å†…å®¹è·ç¦»æ§ä»¶è¾¹ç¼˜çš„åƒç´ æ•° |
| è®¾ç½®è¡Œé—´è· | `void sgl_textline_set_line_margin(sgl_obj_t *obj, uint8_t margin)` | `margin`ï¼šè¡Œä¸è¡Œä¹‹é—´çš„é¢å¤–å‚ç›´é—´è·ï¼ˆåƒç´ ï¼‰ |

> ğŸ”” **é‡è¦æç¤º**ï¼š**å­—ä½“å¿…é¡»æ˜¾å¼è®¾ç½®**ï¼Œå¦åˆ™è¿è¡Œæ—¶ä¼šè§¦å‘æ–­è¨€é”™è¯¯ï¼

### 2.4 Textline ä½¿ç”¨ç¤ºä¾‹

```c
sgl_obj_t *page = sgl_obj_create(NULL);
sgl_page_set_color(page, sgl_rgb(127,127, 127));

// åˆ›å»ºä¸€ä¸ªå¸¦èƒŒæ™¯çš„ Textline
sgl_obj_t *textline = sgl_textline_create(page);
sgl_obj_set_pos(textline, 50, 50);
sgl_obj_set_size(textline, 250, 150);
sgl_textline_set_text(textline,
    "This is a textline control example.\n"
    "Textline controls automatically wrap text.\n"
    "They are perfect for displaying descriptive text.\n"
    "You can customize colors, fonts, and margins.");
sgl_textline_set_text_font(textline, &song23);
sgl_textline_set_text_color(textline, SGL_COLOR_BLACK);
sgl_textline_set_bg_color(textline, SGL_COLOR_BLUE);
sgl_textline_set_radius(textline, 8);
sgl_textline_set_alpha(textline, 200);
sgl_textline_set_edge_margin(textline, 10);
sgl_textline_set_line_margin(textline, 2);
/* è½½å…¥é¡µé¢ */
sgl_screen_load(page);
```

![png0](imag/4/0.png)

---

## 3. Textbox æ§ä»¶è¯¦è§£

### 3.1 æ¦‚å¿µ

`Textbox` æ˜¯ä¸€ä¸ª**åŠŸèƒ½å¢å¼ºå‹å¤šè¡Œæ–‡æœ¬æ§ä»¶**ï¼Œä¸“ä¸º**é•¿æ–‡æœ¬å†…å®¹**è®¾è®¡ã€‚  
æ ¸å¿ƒç‰¹æ€§ï¼š
- æ”¯æŒ**å‚ç›´æ»šåŠ¨**æŸ¥çœ‹å†…å®¹
- å¯è®¾ç½®è¾¹æ¡†ã€èƒŒæ™¯ã€åœ†è§’
- é€‚åˆæ—¥å¿—ã€å¸®åŠ©æ–‡æ¡£ã€æ–‡ç« ç­‰åœºæ™¯

### 3.2 åˆ›å»ºæ–¹å¼

```c
sgl_obj_t* sgl_textbox_create(sgl_obj_t* parent);
```
- **`parent`**ï¼šçˆ¶å¯¹è±¡æŒ‡é’ˆ

### 3.3 åŸºç¡€å±æ€§è®¾ç½®ï¼ˆå®Œæ•´æ¥å£ï¼‰

æ‰€æœ‰è®¾ç½®å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡ä¸º `sgl_obj_t* obj`ï¼Œå³é€šè¿‡ `sgl_textbox_create()` è¿”å›çš„å¯¹è±¡æŒ‡é’ˆã€‚

| åŠŸèƒ½ | å‡½æ•°åŸå‹ | å‚æ•°è¯´æ˜ |
|------|--------|--------|
| è®¾ç½®æ–‡æœ¬å†…å®¹ | `void sgl_textbox_set_text(sgl_obj_t *obj, const char *text)` | `text`ï¼šè¦æ˜¾ç¤ºçš„ C å­—ç¬¦ä¸²ï¼ˆæ”¯æŒ `\n` æ¢è¡Œï¼‰ |
| è®¾ç½®æ–‡æœ¬é¢œè‰² | `void sgl_textbox_set_text_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šæ–‡æœ¬å‰æ™¯è‰² |
| è®¾ç½®å­—ä½“ | `void sgl_textbox_set_text_font(sgl_obj_t *obj, const sgl_font_t *font)` | `font`ï¼šå­—ä½“æŒ‡é’ˆï¼ˆ**å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™æ–­è¨€å¤±è´¥**ï¼‰ |
| è®¾ç½®èƒŒæ™¯é¢œè‰² | `void sgl_textbox_set_bg_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šèƒŒæ™¯å¡«å……è‰²ï¼ˆä½œç”¨äº `textbox->bg.color`ï¼‰ |
| è®¾ç½®åœ†è§’ | `void sgl_textbox_set_radius(sgl_obj_t *obj, uint8_t radius)` | `radius`ï¼šå®¹å™¨åœ†è§’åŠå¾„ï¼ˆä½œç”¨äº `textbox->bg.radius`ï¼‰ |
| è®¾ç½®è¾¹æ¡†é¢œè‰² | `void sgl_textbox_set_border_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šè¾¹æ¡†é¢œè‰²ï¼ˆä½œç”¨äº `textbox->bg.border_color`ï¼‰ |
| è®¾ç½®è¾¹æ¡†å®½åº¦ | `void sgl_textbox_set_border_width(sgl_obj_t *obj, uint8_t width)` | `width`ï¼šè¾¹æ¡†åƒç´ å®½åº¦ï¼ˆä½œç”¨äº `textbox->bg.border`ï¼‰ |
| è®¾ç½®èƒŒæ™¯å›¾ç‰‡ | `void sgl_textbox_set_pixmap(sgl_obj_t *obj, const sgl_pixmap_t *pixmap)` | `pixmap`ï¼šèƒŒæ™¯å›¾æŒ‡é’ˆï¼ˆä½œç”¨äº `textbox->bg.pixmap`ï¼‰ |
| è®¾ç½®è¡Œé—´è· | `void sgl_textbox_set_line_margin(sgl_obj_t *obj, uint8_t margin)` | `margin`ï¼šè¡Œé—´é¢å¤–å‚ç›´é—´è·ï¼ˆåƒç´ ï¼‰ |

> ğŸ’¡ æ³¨æ„ï¼š`Textbox` çš„èƒŒæ™¯ã€è¾¹æ¡†ç­‰æ ·å¼é€šè¿‡å…¶å†…éƒ¨ `sgl_draw_rect_t bg` æˆå‘˜ç®¡ç†ã€‚

### 3.4 Textbox ä½¿ç”¨ç¤ºä¾‹

```c
sgl_obj_t *page = sgl_obj_create(NULL);
sgl_page_set_color(page, sgl_rgb(127,127, 127));
// åˆ›å»ºä¸€ä¸ªå¸¦è¾¹æ¡†çš„æ–‡æœ¬æ¡†
sgl_obj_t *textbox = sgl_textbox_create(page);
sgl_obj_set_pos(textbox, 50, 220);
sgl_obj_set_size(textbox, 250, 150);
sgl_textbox_set_text(textbox,
    "This is a textbox control example.\n"
    "Textbox controls support multiline text display,\n"
    "and can scroll to view long text content.\n"
    "They are very suitable for displaying instructions,\n"
    "log information, or other lengthy text content.\n"
    "By setting borders and background colors,\n"
    "textboxes can look more attractive and readable."
);
sgl_textbox_set_text_font(textbox, &song23);
sgl_textbox_set_text_color(textbox, SGL_COLOR_BLACK);
sgl_textbox_set_bg_color(textbox, SGL_COLOR_WHITE);
sgl_textbox_set_border_color(textbox, SGL_COLOR_GRAY);
sgl_textbox_set_border_width(textbox, 1);
sgl_textbox_set_radius(textbox, 5);
sgl_textbox_set_line_margin(textbox, 3);
/* è½½å…¥é¡µé¢ */
sgl_screen_load(page);

```

![png0](imag/4/1.png)

---

## 4. Textline ä¸ Textbox å¯¹æ¯”

| ç‰¹æ€§ | Textline | Textbox |
|------|----------|---------|
| æ–‡æœ¬è¡Œæ•° | å¤šè¡Œ | å¤šè¡Œ |
| è‡ªåŠ¨æ¢è¡Œ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| æ»šåŠ¨æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| è¾¹æ¡†è®¾ç½® | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒï¼ˆ`border_color`, `border_width`ï¼‰ |
| èƒŒæ™¯å›¾æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒï¼ˆ`set_pixmap`ï¼‰ |
| è¡Œé—´è·è®¾ç½® | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| åœ†è§’/èƒŒæ™¯ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| å…¸å‹ä½¿ç”¨åœºæ™¯ | æè¿°æ€§æ–‡æœ¬ã€æ ‡ç­¾ã€æç¤º | æ—¥å¿—ã€å¸®åŠ©æ–‡æ¡£ã€é•¿ç¯‡æ–‡ç« ã€å¯ç¼–è¾‘åŒºåŸŸ |

---
## 5. å®Œæ•´ç¤ºä¾‹

```c
Â  Â /* åˆ›å»ºä¸»é¡µé¢ */
Â  Â  sgl_obj_t *page = sgl_obj_create(NULL);
Â  Â  sgl_page_set_color(page, sgl_rgb(127,127, 127));
Â  Â  // æ ‡é¢˜æ ‡ç­¾
Â  Â  sgl_obj_t *titleLabel = sgl_label_create(page);
Â  Â  sgl_obj_set_pos(titleLabel, 20, 20);
Â  Â  sgl_obj_set_size(titleLabel, 250, 30);
Â  Â  sgl_label_set_text(titleLabel, "Text Controls Example");
Â  Â  sgl_label_set_font(titleLabel, &song23);
Â  Â  sgl_label_set_text_color(titleLabel, SGL_COLOR_BLUE);
Â  Â  sgl_label_set_bg_color(titleLabel, SGL_COLOR_CADET_BLUE);
Â  Â  sgl_label_set_radius(titleLabel, 5);
Â  Â  // æè¿° Textline
Â  Â  sgl_obj_t *descTextline = sgl_textline_create(page);
Â  Â  sgl_obj_set_pos(descTextline, 20, 70);
Â  Â  sgl_obj_set_size(descTextline, 280, 60);
Â  Â  sgl_textline_set_text(descTextline,
Â  Â  Â  Â  "This is a textline control demonstration. "
Â  Â  Â  Â  "Textline controls are ideal for displaying descriptive text with automatic line wrapping.");
Â  Â  sgl_textline_set_text_font(descTextline, &song23);
Â  Â  sgl_textline_set_text_color(descTextline, SGL_COLOR_BLACK);
Â  Â  sgl_textline_set_bg_color(descTextline, SGL_COLOR_GRAY);
Â  Â  sgl_textline_set_radius(descTextline, 5);
Â  Â  sgl_textline_set_edge_margin(descTextline, 5);
Â  Â  sgl_textline_set_line_margin(descTextline, 2);
Â  Â  // å†…å®¹ Textbox
Â  Â  sgl_obj_t *contentTextbox = sgl_textbox_create(page);
Â  Â  sgl_obj_set_pos(contentTextbox, 310, 70);
Â  Â  sgl_obj_set_size(contentTextbox, 280, 120);
Â  Â  sgl_textbox_set_text(contentTextbox,
Â  Â  Â  Â  "This is a textbox control demonstration.\n\n"
Â  Â  Â  Â  "Textbox controls offer more advanced features compared to textlines:\n"
Â  Â  Â  Â  "1. Scrollable content for long texts\n"
Â  Â  Â  Â  "2. Customizable borders\n"
Â  Â  Â  Â  "3. Better suited for large amounts of text\n\n"
Â  Â  Â  Â  "Some key differences:\n"
Â  Â  Â  Â  "- Textline: Best for short descriptions\n"
Â  Â  Â  Â  "- Textbox: Ideal for logs, articles, or editable content\n\n"
Â  Â  Â  Â  "Both controls support:\n"
Â  Â  Â  Â  "- Custom fonts and colors\n"
Â  Â  Â  Â  "- Background colors\n"
Â  Â  Â  Â  "- Rounded corners\n"
Â  Â  Â  Â  "- Line spacing adjustment"
Â  Â  );
Â  Â  sgl_textbox_set_text_font(contentTextbox, &song23);
Â  Â  sgl_textbox_set_text_color(contentTextbox, SGL_COLOR_BLACK);
Â  Â  sgl_textbox_set_bg_color(contentTextbox, SGL_COLOR_WHITE);
Â  Â  sgl_textbox_set_border_color(contentTextbox, SGL_COLOR_GRAY);
Â  Â  sgl_textbox_set_border_width(contentTextbox, 1);
Â  Â  sgl_textbox_set_radius(contentTextbox, 5);
Â  Â  sgl_textbox_set_line_margin(contentTextbox, 2);
Â  Â  /* è½½å…¥é¡µé¢ */
Â  Â  sgl_screen_load(page);
```


![png0](imag/4/2.png)

---
> ğŸ“˜ **ç›¸å…³å¤´æ–‡ä»¶è·¯å¾„**  
> - textline APIï¼š`sgl/source/widgets/textline/sgl_textline.h
> - textbox APIï¼š`sgl/source/widgets/textbox/sgl_textbox.h`   
> - æ ¸å¿ƒå¯¹è±¡ï¼š`sgl/source/include/sgl_core.h`
---