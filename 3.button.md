# SGL Button æŽ§ä»¶åº”ç”¨æŒ‡å—

## 1. ç®€ä»‹

`Button`ï¼ˆæŒ‰é’®ï¼‰æ˜¯å›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­æœ€åŸºç¡€ä¸”é«˜é¢‘ä½¿ç”¨çš„**äº¤äº’æŽ§ä»¶**ã€‚  
åœ¨ **SGLï¼ˆSimple Graphics Libraryï¼‰** ä¸­ï¼ŒæŒ‰é’®æ”¯æŒæ–‡æœ¬ã€å›¾æ ‡ã€èƒŒæ™¯å›¾ç‰‡ã€åœ†è§’ã€è¾¹æ¡†ã€é€æ˜Žåº¦ç­‰å¤šç§æ ·å¼ï¼Œå¹¶å…·å¤‡æŒ‰ä¸‹æ—¶çš„è§†è§‰åé¦ˆï¼ˆå¦‚ç¼©æ”¾æ•ˆæžœï¼‰ã€‚

> âš ï¸ æŒ‰é’®æ˜¯**ç»ˆç«¯æŽ§ä»¶**ï¼Œä¸èƒ½åŒ…å«å­æŽ§ä»¶ï¼Œä»…å¯ä½œä¸ºå¶èŠ‚ç‚¹ä½¿ç”¨ã€‚

---

## 2. åˆ›å»ºæŒ‰é’®

### 2.1 åˆ›å»ºå‡½æ•°

```c
sgl_obj_t* sgl_button_create(sgl_obj_t* parent);
```

- **`parent`**ï¼šçˆ¶å¯¹è±¡æŒ‡é’ˆï¼ˆå¦‚ `Page` æˆ– `Rect`ï¼‰
  - è‹¥ä¼ å…¥ `NULL`ï¼Œåˆ™åˆ›å»ºä¸ºé¡¶å±‚æŽ§ä»¶ï¼ˆä¸æŽ¨èï¼Œå»ºè®®æŒ‚è½½åˆ°é¡µé¢ï¼‰

> âœ… åˆ›å»ºåŽè‡ªåŠ¨è®¾ç½®ä¸º **å¯ç‚¹å‡»**ï¼ˆ`sgl_obj_set_clickable`ï¼‰å’Œ **å¯å¼¹æ€§ç¼©æ”¾**ï¼ˆ`sgl_obj_set_flexible`ï¼‰

---

## 3. å±žæ€§è®¾ç½®æŽ¥å£

æ‰€æœ‰ setter å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡ä¸º `sgl_obj_t* obj`ï¼Œå³é€šè¿‡ `sgl_button_create()` è¿”å›žçš„å¯¹è±¡æŒ‡é’ˆã€‚

### 3.1 èƒŒæ™¯ä¸Žå¤–è§‚

| åŠŸèƒ½     | å‡½æ•°åŽŸåž‹                                                                     | å‚æ•°è¯´æ˜Ž                                          |
| ------ | ------------------------------------------------------------------------ | --------------------------------------------- |
| è®¾ç½®èƒŒæ™¯é¢œè‰² | `void sgl_button_set_color(sgl_obj_t *obj, sgl_color_t color)`           | `color`ï¼šå¡«å……è‰²ï¼ˆä½œç”¨äºŽ `button->rect.color`ï¼‰         |
| è®¾ç½®é€æ˜Žåº¦  | `void sgl_button_set_alpha(sgl_obj_t *obj, uint8_t alpha)`               | `alpha`ï¼š0~255ï¼Œ255 ä¸ºå®Œå…¨ä¸é€æ˜Ž                      |
| è®¾ç½®è¾¹æ¡†å®½åº¦ | `void sgl_button_set_border_width(sgl_obj_t *obj, uint8_t width)`        | `width`ï¼šè¾¹æ¡†åƒç´ å®½åº¦ï¼ˆä½œç”¨äºŽ `button->rect.border`ï¼‰     |
| è®¾ç½®è¾¹æ¡†é¢œè‰² | `void sgl_button_set_border_color(sgl_obj_t *obj, sgl_color_t color)`    | `color`ï¼šè¾¹æ¡†é¢œè‰²ï¼ˆä½œç”¨äºŽ `button->rect.border_color`ï¼‰ |
| è®¾ç½®èƒŒæ™¯å›¾ç‰‡ | `void sgl_button_set_pixmap(sgl_obj_t *obj, const sgl_pixmap_t *pixmap)` | `pixmap`ï¼šèƒŒæ™¯å›¾æŒ‡é’ˆï¼ˆä½œç”¨äºŽ `button->rect.pixmap`ï¼‰     |
| è®¾ç½®åœ†è§’åŠå¾„ | `void sgl_button_set_radius(sgl_obj_t *obj, uint8_t radius)`             | `radius`ï¼šåœ†è§’åƒç´ å€¼ï¼Œå†…éƒ¨è°ƒç”¨ `sgl_obj_fix_radius()` ä¿®æ­£ |

### 3.2 æ–‡æœ¬å±žæ€§

| åŠŸèƒ½ | å‡½æ•°åŽŸåž‹ | å‚æ•°è¯´æ˜Ž |
|------|--------|--------|
| è®¾ç½®æ˜¾ç¤ºæ–‡æœ¬ | `void sgl_button_set_text(sgl_obj_t *obj, const char *text)` | `text`ï¼šC å­—ç¬¦ä¸²ï¼ˆè‹¥ä¸º `NULL` åˆ™ä¸ç»˜åˆ¶æ–‡æœ¬ï¼‰ |
| è®¾ç½®æ–‡æœ¬é¢œè‰² | `void sgl_button_set_text_color(sgl_obj_t *obj, sgl_color_t color)` | `color`ï¼šæ–‡æœ¬å‰æ™¯è‰² |
| è®¾ç½®æ–‡æœ¬å¯¹é½ | `void sgl_button_set_text_align(sgl_obj_t *obj, uint8_t align)` | `align`ï¼šå¯¹é½æ–¹å¼ï¼ˆå¦‚ `SGL_ALIGN_CENTER`ï¼‰ |
| è®¾ç½®å­—ä½“ | `void sgl_button_set_font(sgl_obj_t *obj, const sgl_font_t *font)` | `font`ï¼šå­—ä½“æŒ‡é’ˆï¼ˆè‹¥æœªè®¾ç½®ï¼Œä»…å›¾æ ‡å¯è§ï¼‰ |

### 3.3 å›¾æ ‡

| åŠŸèƒ½ | å‡½æ•°åŽŸåž‹ | å‚æ•°è¯´æ˜Ž |
|------|--------|--------|
| è®¾ç½®å›¾æ ‡ | `void sgl_button_set_icon(sgl_obj_t *obj, const sgl_icon_pixmap_t *icon)` | `icon`ï¼šå›¾æ ‡æŒ‡é’ˆï¼ˆç±»åž‹ä¸º `sgl_icon_pixmap_t`ï¼‰ |

> ðŸ“Œ **æ–‡æœ¬ + å›¾æ ‡å¸ƒå±€**ï¼š  
> è‹¥åŒæ—¶è®¾ç½® `text` å’Œ `icon`ï¼Œå›¾æ ‡ç»˜åˆ¶åœ¨å·¦ä¾§ï¼Œæ–‡æœ¬å³ç§» `icon->width + 2` åƒç´ ã€‚

---

## 4. äº‹ä»¶å¤„ç†æœºåˆ¶

### 4.1 æ”¯æŒçš„äº‹ä»¶ç±»åž‹

| äº‹ä»¶ç±»åž‹                 | è§¦å‘æ—¶æœº   | è¡Œä¸º                                                       |
| -------------------- | ------ | -------------------------------------------------------- |
| `SGL_EVENT_PRESSED`  | ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’® | æŒ‰é’®è‹¥ä¸º `flexible`ï¼Œä¼šè§¦å‘ `sgl_obj_size_zoom(obj, 2)`ï¼ˆæ”¾å¤§ 2 åƒç´ ï¼‰ |
| `SGL_EVENT_RELEASED` | ç”¨æˆ·é‡Šæ”¾æŒ‰é’® | æ¢å¤åŽŸå§‹å°ºå¯¸ï¼Œå¹¶æ‰§è¡Œç”¨æˆ·å›žè°ƒ                                           |

> âœ… **æŽ¨èåœ¨ `SGL_EVENT_RELEASED` ä¸­å¤„ç†ä¸šåŠ¡é€»è¾‘**ï¼Œé¿å…è¯¯è§¦ã€‚

### 4.2 æ³¨å†Œäº‹ä»¶å›žè°ƒ

```c
// è®¾ç½®å›žè°ƒå‡½æ•°ï¼ˆå¯é€‰ user_dataï¼‰
sgl_obj_set_event_cb(button, event_handler, user_data);

// æ˜¾å¼å¯ç”¨ç‚¹å‡»ï¼ˆè™½é»˜è®¤å·²å¯ç”¨ï¼Œä½†æ˜¾å¼è°ƒç”¨æ›´å®‰å…¨ï¼‰
sgl_obj_set_clickable(button);
```

> ðŸ”’ **ç¦ç”¨æŒ‰é’®äº¤äº’**ï¼š  
```c
 sgl_obj_set_unclickable(button);
```

### 4.3 ç¨‹åºåŒ–è§¦å‘äº‹ä»¶

å¯é€šè¿‡ `sgl_event_send_obj()` ä¸»åŠ¨æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼š

```c
sgl_event_send_obj(button, SGL_EVENT_PRESSED);
// ... å»¶æ—¶æˆ–çŠ¶æ€åˆ¤æ–­ ...
sgl_event_send_obj(button, SGL_EVENT_RELEASED);
```
#### åº”ç”¨åœºæ™¯ï¼š
- é”®ç›˜å¿«æ·é”®æ˜ å°„åˆ°æŒ‰é’®åŠŸèƒ½
- å®šæ—¶å™¨æˆ–çŠ¶æ€æœºè§¦å‘æ“ä½œ

> ðŸ’¡ **é‡è¦æç¤º**ï¼š  
> - ä¸è¦è¿žç»­è°ƒç”¨ `PRESSED` å’Œ `RELEASED`ï¼Œå¦åˆ™æ— æ³•çœ‹åˆ°æŒ‰ä¸‹æ—¶çš„ç¼©æ”¾åŠ¨ç”»ã€‚  
> - é€‚ç”¨äºŽï¼šå¤–éƒ¨ç‰©ç†æŒ‰é”®æ˜ å°„ã€å®šæ—¶å™¨è§¦å‘ã€çŠ¶æ€æœºé©±åŠ¨ç­‰åœºæ™¯ã€‚

---

## 5. åº”ç”¨ç¤ºä¾‹

```c
static int click_count = 0;
static void on_button_event(sgl_event_t* event) {
    switch (event->type) {
        case SGL_EVENT_PRESSED:
            SGL_LOG_INFO("Button PRESSED\n");
            break;
        case SGL_EVENT_RELEASED:
            click_count++;
            SGL_LOG_INFO("Click count: %d\n", click_count);
            break;
    }
}

    
    // åˆ›å»ºä¸»é¡µé¢
    sgl_obj_t* page = sgl_obj_create(NULL);
    sgl_page_set_color(page, SGL_COLOR_WHITE);
    sgl_screen_load(page);

    // åˆ›å»ºå®¹å™¨
    sgl_obj_t* container = sgl_rect_create(page);
    sgl_obj_set_pos(container, 20, 20);
    sgl_obj_set_size(container, 400, 250);
    sgl_rect_set_color(container, SGL_COLOR_LIGHT_GRAY);

    // åˆ›å»ºæŒ‰é’®
    sgl_obj_t* btn = sgl_button_create(container);
    sgl_obj_set_pos(btn, 20, 20);
    sgl_obj_set_size(btn, 120, 40);
    sgl_button_set_text(btn, "Click Me");
    sgl_button_set_font(btn, &consolas23);
    sgl_button_set_color(btn, SGL_COLOR_GREEN);
    sgl_button_set_text_color(btn, SGL_COLOR_WHITE);
    sgl_button_set_radius(btn, 10);
    sgl_button_set_border_width(btn, 1);
    sgl_obj_set_event_cb(btn, on_button_event, NULL);


```

![Button ç¤ºä¾‹](imag/3/1.png)

---

## 6. é«˜çº§ç”¨æ³•ï¼ˆå‚è€ƒï¼‰

- [åŸºäºŽæŒ‰é’®çš„æ»‘åŠ¨èœå•](demo/sliding_menu_demo.md)
- [æŒ‰é’®ç‚¹å‡»åŠ¨ç”»æ¼”ç¤º](demo/button_anim.c)

---

## 7. æ€»ç»“

- âœ… **å§‹ç»ˆè®¾ç½®å­—ä½“**ï¼šè‹¥æ˜¾ç¤ºæ–‡æœ¬ï¼ŒåŠ¡å¿…è°ƒç”¨ `sgl_button_set_font()`ã€‚
- âœ… **åˆç†ä½¿ç”¨å›¾æ ‡+æ–‡æœ¬**ï¼šå›¾æ ‡æå‡è¯†åˆ«åº¦ï¼Œæ–‡æœ¬å¢žå¼ºå¯è¯»æ€§ã€‚
- âœ… **è§†è§‰åé¦ˆæ˜Žç¡®**ï¼šåˆ©ç”¨é»˜è®¤çš„â€œæŒ‰ä¸‹ç¼©æ”¾â€æ•ˆæžœï¼Œæˆ–è‡ªå®šä¹‰ `PRESSED/RELEASED` æ ·å¼ã€‚
- âœ… **é¿å…è¿‡å°å°ºå¯¸**ï¼šç¡®ä¿æŒ‰é’®å¯è¢«ç”¨æˆ·å‡†ç¡®ç‚¹å‡»ï¼ˆå»ºè®® â‰¥ 40Ã—40 åƒç´ ï¼‰ã€‚

---
> ðŸ“˜ **ç›¸å…³å¤´æ–‡ä»¶è·¯å¾„**  
> - buttoon APIï¼š`sgl/source/widgets/button/sgl_button.h`  
> - äº‹ä»¶ç³»ç»Ÿï¼š`sgl/source/include/sgl_event.h`  
> - æ ¸å¿ƒå¯¹è±¡ï¼š`sgl/source/include/sgl_core.h`
---